<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jueves: Medidas de Control y Mitigaci√≥n</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100%;
            color: #2d3748;
            line-height: 1.8;
            font-size: 16px;
        }

        html {
            height: 100%;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(25px);
            border-radius: 28px;
            padding: 50px 40px;
            margin-bottom: 40px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.08);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0 0 25px 0;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        .header .subtitle {
            font-size: 1.4rem;
            color: #5a6c7d;
            margin: 0 0 30px 0;
            font-weight: 400;
            line-height: 1.6;
        }

        .progress-container {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 100%;
            border-radius: 4px;
            animation: progressFill 2s ease-out;
        }

        @keyframes progressFill {
            from { width: 0%; }
            to { width: 100%; }
        }

        /* Barra superior horizontal */
        .top-bar {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .timer-card {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            padding: 30px;
            border-radius: 28px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(102,126,234,0.3);
            border: 3px solid rgba(255,255,255,0.2);
        }

        .timer-card h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .timer-card p {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .timer-display {
            font-size: 3rem;
            font-weight: 800;
            margin: 15px 0;
            font-family: 'SF Mono', Monaco, 'Courier New', monospace;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .start-btn {
            background: rgba(255,255,255,0.25);
            border: 2px solid rgba(255,255,255,0.4);
            color: white;
            padding: 15px 30px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            font-size: 1.05rem;
        }

        .start-btn:hover {
            background: rgba(255,255,255,0.35);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .module-nav {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(25px);
            border-radius: 28px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            border: 2px solid rgba(255,255,255,0.3);
        }

        .module-nav h4 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #1a202c;
            font-weight: 700;
            text-align: center;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .module-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: rgba(248,250,252,0.5);
            text-align: center;
        }

        .module-item:hover {
            background: rgba(102,126,234,0.1);
            border-color: #667eea;
            transform: translateY(-3px);
        }

        .module-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            box-shadow: 0 10px 25px rgba(102,126,234,0.3);
        }

        .module-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .module-title {
            font-weight: 600;
            font-size: 0.85rem;
            line-height: 1.2;
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(25px);
            border-radius: 28px;
            padding: 50px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.08);
            border: 2px solid rgba(255,255,255,0.3);
            position: relative;
            min-height: 700px;
        }

        .story-page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .story-page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            box-shadow: 0 8px 20px rgba(102,126,234,0.3);
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102,126,234,0.4);
            filter: brightness(1.1);
        }

        .nav-btn:disabled {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .page-indicators {
            display: flex;
            gap: 10px;
        }

        .page-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #cbd5e0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-dot.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scale(1.2);
        }

        .story-header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 24px;
            border: 3px solid transparent;
            background-clip: padding-box;
            position: relative;
        }

        .story-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            border-radius: 24px;
            padding: 3px;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            z-index: -1;
        }

        .story-title {
            font-size: 3rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 20px;
            line-height: 1.3;
        }

        .story-subtitle {
            font-size: 1.3rem;
            color: #4a5568;
            font-style: italic;
            font-weight: 400;
            line-height: 1.6;
        }

        .character-intro {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 35px;
            border-radius: 24px;
            margin: 40px 0;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 2px solid rgba(102,126,234,0.1);
        }

        .character-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin-right: 30px;
            flex-shrink: 0;
            box-shadow: 0 10px 25px rgba(102,126,234,0.3);
        }

        .character-info h3 {
            margin: 0 0 15px 0;
            color: #1a202c;
            font-size: 1.6rem;
            font-weight: 600;
        }

        .character-info p {
            margin: 0;
            color: #4a5568;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .story-content {
            font-size: 1.15rem;
            line-height: 2;
            color: #2d3748;
            text-align: justify;
        }

        .story-content p {
            margin-bottom: 30px;
            text-indent: 2em;
        }

        .story-content p:first-of-type {
            text-indent: 0;
            font-size: 1.2rem;
            font-weight: 500;
        }

        .quote-box {
            background: linear-gradient(135deg, #e6fffa, #f0fff4);
            border: 3px solid transparent;
            background-clip: padding-box;
            padding: 35px;
            margin: 40px 0;
            border-radius: 20px;
            font-style: italic;
            font-size: 1.2rem;
            color: #2d3748;
            position: relative;
            text-align: center;
            line-height: 1.8;
        }

        .quote-box::before {
            content: '"';
            position: absolute;
            top: -10px;
            left: 20px;
            font-size: 4rem;
            color: #48bb78;
            font-family: serif;
        }

        .quote-box::after {
            content: '"';
            position: absolute;
            bottom: -30px;
            right: 20px;
            font-size: 4rem;
            color: #48bb78;
            font-family: serif;
        }

        .eureka-moment {
            background: linear-gradient(135deg, #fff7ed, #fed7aa);
            border: 3px solid #f6ad55;
            padding: 35px;
            border-radius: 24px;
            margin: 40px 0;
            text-align: center;
            box-shadow: 0 15px 35px rgba(246,173,85,0.2);
            position: relative;
            overflow: hidden;
        }

        .eureka-moment::before {
            content: '‚ú®';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
        }

        .eureka-moment h4 {
            color: #c05621;
            font-size: 1.4rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .eureka-moment p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin: 0;
        }

        .learning-objectives {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 40px;
            border-radius: 24px;
            margin: 40px 0;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 2px solid rgba(102,126,234,0.1);
        }

        .learning-objectives h4 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
        }

        .learning-objectives ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .learning-objectives li {
            padding: 20px 0;
            border-bottom: 2px solid #e2e8f0;
            color: #4a5568;
            font-size: 1.1rem;
            line-height: 1.8;
            transition: all 0.3s ease;
        }

        .learning-objectives li:hover {
            background: rgba(102,126,234,0.05);
            padding-left: 20px;
            border-radius: 12px;
        }

        .learning-objectives li:last-child {
            border-bottom: none;
        }

        .learning-objectives li::before {
            content: 'üéØ';
            margin-right: 15px;
            font-size: 1.2rem;
        }

        /* Hierarchy Pyramid */
        .hierarchy-pyramid {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 40px 0;
            gap: 15px;
        }

        .pyramid-level {
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            color: white;
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .pyramid-level:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .pyramid-level::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            transform: rotate(45deg);
        }

        .level-1 {
            background: linear-gradient(135deg, #e53e3e, #c53030);
            width: 90%;
            font-size: 1.3rem;
        }

        .level-2 {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            width: 80%;
            font-size: 1.2rem;
        }

        .level-3 {
            background: linear-gradient(135deg, #d69e2e, #b7791f);
            width: 70%;
            font-size: 1.1rem;
        }

        .level-4 {
            background: linear-gradient(135deg, #38a169, #2f855a);
            width: 60%;
            font-size: 1rem;
        }

        .level-5 {
            background: linear-gradient(135deg, #3182ce, #2c5282);
            width: 50%;
            font-size: 0.95rem;
        }

        /* 3 E's Framework */
        .three-es-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin: 40px 0;
        }

        .e-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.12);
            border: 3px solid transparent;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .e-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .e-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
        }

        .engineering-card::before {
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .education-card::before {
            background: linear-gradient(90deg, #48bb78, #38a169);
        }

        .enforcement-card::before {
            background: linear-gradient(90deg, #e53e3e, #c53030);
        }

        .e-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .e-icon {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .e-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
        }

        .e-description {
            color: #4a5568;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .e-examples {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .e-examples li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .e-examples li:last-child {
            border-bottom: none;
        }

        .e-examples li::before {
            content: '‚úì';
            color: #48bb78;
            font-weight: bold;
            margin-right: 10px;
        }

        /* Control Details Cards */
        .control-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .control-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .control-card:hover {
            border-color: #667eea;
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .control-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .control-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .control-icon {
            font-size: 2.5rem;
            margin-right: 15px;
        }

        .control-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2d3748;
        }

        .control-description {
            color: #4a5568;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .control-examples {
            background: #f7fafc;
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
        }

        .control-examples h5 {
            color: #2d3748;
            margin: 0 0 15px 0;
            font-size: 1rem;
        }

        .control-examples ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .control-examples li {
            padding: 6px 0;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .control-examples li::before {
            content: '‚Ä¢';
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }

        /* Interactive Tools */
        .interactive-tool {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 15px 35px rgba(102,126,234,0.3);
        }

        .tool-input {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            margin-bottom: 15px;
        }

        .tool-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .tool-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.4);
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            margin: 10px 5px;
        }

        .tool-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .tool-result {
            background: rgba(255,255,255,0.15);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .horizontal-nav-item {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: #4a5568;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            backdrop-filter: blur(15px);
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .horizontal-nav-item:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(102,126,234,0.5);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102,126,234,0.2);
        }

        .horizontal-nav-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102,126,234,0.3);
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 1200px;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .close-btn {
            background: #e53e3e;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 1024px) {
            .top-bar {
                grid-template-columns: 1fr;
            }
            
            .three-es-grid {
                grid-template-columns: 1fr;
            }
            
            .control-details-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .main-content {
                padding: 30px 20px;
            }
            
            .story-title {
                font-size: 2rem;
            }

            .horizontal-nav-item {
                padding: 10px 15px;
                font-size: 0.8rem;
            }

            .pyramid-level {
                width: 95% !important;
                font-size: 1rem !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üõ°Ô∏è Medidas de Control y Mitigaci√≥n</h1>
            <p class="subtitle">Jueves - Semana 1: Jerarqu√≠a de Controles y Estrategias de las 3 E's</p>
            
            <!-- Men√∫ horizontal de navegaci√≥n -->
            <div style="display: flex; justify-content: center; gap: 15px; margin: 25px 0; flex-wrap: wrap;">
                <div class="horizontal-nav-item active" onclick="goToPage(1)" data-page="1">
                    <span style="font-size: 1.2rem; margin-right: 8px;">üèóÔ∏è</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">Jerarqu√≠a</span>
                </div>
                <div class="horizontal-nav-item" onclick="goToPage(2)" data-page="2">
                    <span style="font-size: 1.2rem; margin-right: 8px;">üîß</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">Ingenier√≠a</span>
                </div>
                <div class="horizontal-nav-item" onclick="goToPage(3)" data-page="3">
                    <span style="font-size: 1.2rem; margin-right: 8px;">üìö</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">Educaci√≥n</span>
                </div>
                <div class="horizontal-nav-item" onclick="goToPage(4)" data-page="4">
                    <span style="font-size: 1.2rem; margin-right: 8px;">‚öñÔ∏è</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">Cumplimiento</span>
                </div>
                <div class="horizontal-nav-item" onclick="goToPage(5)" data-page="5">
                    <span style="font-size: 1.2rem; margin-right: 8px;">ü§ñ</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">IA Aplicada</span>
                </div>
                <div class="horizontal-nav-item" onclick="goToPage(6)" data-page="6">
                    <span style="font-size: 1.2rem; margin-right: 8px;">üéØ</span>
                    <span style="font-weight: 600; font-size: 0.9rem;">Pr√°ctica</span>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
        </header>

        <div class="top-bar">
            <div class="timer-card">
                <h3>‚è±Ô∏è Tiempo de Sesi√≥n</h3>
                <p>Duraci√≥n estimada del microcurso</p>
                <div class="timer-display" id="timerDisplay">20:00</div>
                <button class="start-btn" onclick="startMicrocourse()">Iniciar Microcurso</button>
            </div>
            
            <div class="module-nav">
                <h4>üìö Navegaci√≥n del Curso</h4>
                <div class="nav-grid">
                    <div class="module-item" onclick="goToPage(1)">
                        <div class="module-icon">üèóÔ∏è</div>
                        <div class="module-title">Jerarqu√≠a de Controles</div>
                    </div>
                    <div class="module-item" onclick="goToPage(2)">
                        <div class="module-icon">üîß</div>
                        <div class="module-title">Controles de Ingenier√≠a</div>
                    </div>
                    <div class="module-item" onclick="goToPage(3)">
                        <div class="module-icon">üìö</div>
                        <div class="module-title">Programas Educativos</div>
                    </div>
                    <div class="module-item" onclick="goToPage(4)">
                        <div class="module-icon">‚öñÔ∏è</div>
                        <div class="module-title">Enforcement</div>
                    </div>
                    <div class="module-item" onclick="goToPage(5)">
                        <div class="module-icon">ü§ñ</div>
                        <div class="module-title">IA Aplicada</div>
                    </div>
                    <div class="module-item" onclick="goToPage(6)">
                        <div class="module-icon">üéØ</div>
                        <div class="module-title">Aplicaci√≥n Pr√°ctica</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="lesson-grid">
            <main class="main-content">
                <!-- P√°gina 1: Jerarqu√≠a de Controles -->
                <div id="page1" class="story-page active">
                    <div class="story-header">
                        <h2 class="story-title">üèóÔ∏è La Jerarqu√≠a de Controles</h2>
                        <p class="story-subtitle">Cap√≠tulo 1: Ana descubre el orden de prioridad en las medidas de control</p>
                    </div>

                    <div class="character-intro">
                        <div class="character-avatar">üë©‚Äçüíº</div>
                        <div class="character-info">
                            <h3>Ana Rodr√≠guez - Semana 1, D√≠a 4</h3>
                            <p>Despu√©s de identificar los riesgos en TransLog√≠stica durante los primeros d√≠as, Ana ahora debe implementar medidas de control efectivas. Ha aprendido que no todas las medidas son igualmente efectivas y que existe una jerarqu√≠a cient√≠ficamente probada para maximizar la protecci√≥n.</p>
                        </div>
                    </div>

                    <div class="story-content">
                        <p>Era viernes por la ma√±ana cuando Ana recibi√≥ el presupuesto aprobado para implementar las medidas de control. Sin embargo, los recursos eran limitados y deb√≠a priorizar sabiamente. Record√≥ las palabras de su mentor en seguridad industrial:</p>

                        <div class="quote-box">
                            "Ana, la efectividad de los controles no depende de su costo, sino de su posici√≥n en la jerarqu√≠a. Un control de eliminaci√≥n barato puede ser m√°s efectivo que un EPP costoso."
                        </div>

                        <p>Fue entonces cuando Ana descubri√≥ la Jerarqu√≠a de Controles, un marco sistem√°tico que prioriza las medidas seg√∫n su efectividad para proteger a las personas.</p>
                    </div>

                    <div class="hierarchy-pyramid">
                        <div class="pyramid-level level-1" onclick="showControlDetails('eliminacion')">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üö´</div>
                            <div>1. ELIMINACI√ìN</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Remover completamente el peligro</div>
                        </div>
                        
                        <div class="pyramid-level level-2" onclick="showControlDetails('sustitucion')">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üîÑ</div>
                            <div>2. SUSTITUCI√ìN</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Reemplazar por algo menos peligroso</div>
                        </div>
                        
                        <div class="pyramid-level level-3" onclick="showControlDetails('ingenieria')">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üîß</div>
                            <div>3. CONTROLES DE INGENIER√çA</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Aislar a las personas del peligro</div>
                        </div>
                        
                        <div class="pyramid-level level-4" onclick="showControlDetails('administrativo')">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üìã</div>
                            <div>4. CONTROLES ADMINISTRATIVOS</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Cambiar la forma de trabajar</div>
                        </div>
                        
                        <div class="pyramid-level level-5" onclick="showControlDetails('epp')">
                            <div style="font-size: 2rem; margin-bottom: 10px;">ü¶∫</div>
                            <div>5. EQUIPOS DE PROTECCI√ìN PERSONAL</div>
                            <div style="font-size: 0.9rem; opacity: 0.9; margin-top: 5px;">Proteger al individuo</div>
                        </div>
                    </div>

                    <div class="eureka-moment">
                        <h4>üí° Principio Fundamental</h4>
                        <p>"Los controles m√°s efectivos son aquellos que eliminan o reducen el peligro en su fuente, no los que dependen del comportamiento humano. Mientras m√°s arriba en la pir√°mide, mayor protecci√≥n y menor dependencia de la acci√≥n individual."</p>
                    </div>

                    <div class="learning-objectives">
                        <h4>üéØ Principios Clave de la Jerarqu√≠a:</h4>
                        <ul>
                            <li>Los controles superiores protegen a m√°s personas simult√°neamente</li>
                            <li>Los controles inferiores requieren mayor supervisi√≥n y mantenimiento</li>
                            <li>La combinaci√≥n de m√∫ltiples niveles aumenta la efectividad total</li>
                            <li>Siempre evaluar primero las opciones de nivel superior antes de implementar las inferiores</li>
                        </ul>
                    </div>
                </div>

                <!-- P√°gina 2: Controles de Ingenier√≠a -->
                <div id="page2" class="story-page">
                    <div class="story-header">
                        <h2 class="story-title">üîß Controles de Ingenier√≠a</h2>
                        <p class="story-subtitle">Cap√≠tulo 2: Modificaciones f√≠sicas del entorno vial</p>
                    </div>

                    <div class="story-content">
                        <p>Ana se enfoc√≥ primero en los controles de ingenier√≠a, sabiendo que estas modificaciones f√≠sicas del entorno vial ofrecen protecci√≥n continua sin depender del comportamiento humano. Estos controles funcionan 24/7, protegiendo tanto a conductores experimentados como novatos.</p>

                        <div class="quote-box">
                            "La ingenier√≠a vial perdona los errores humanos. Un buen dise√±o geom√©trico puede prevenir un accidente incluso cuando el conductor comete un error."
                        </div>
                    </div>

                    <div class="control-details-grid">
                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üõ£Ô∏è</span>
                                <h4 class="control-name">Dise√±o Geom√©trico</h4>
                            </div>
                            <p class="control-description">Modificaciones en la geometr√≠a de la v√≠a para mejorar la seguridad y reducir la probabilidad de accidentes.</p>
                            <div class="control-examples">
                                <h5>üéØ Ejemplos Pr√°cticos:</h5>
                                <ul>
                                    <li>Ampliaci√≥n de curvas para mejorar visibilidad</li>
                                    <li>Suavizaci√≥n de pendientes pronunciadas</li>
                                    <li>Creaci√≥n de carriles de aceleraci√≥n/desaceleraci√≥n</li>
                                    <li>Implementaci√≥n de rotondas en intersecciones peligrosas</li>
                                    <li>Bermas de seguridad m√°s amplias</li>
                                    <li>Zonas de escape para veh√≠culos pesados</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üö¶</span>
                                <h4 class="control-name">Se√±alizaci√≥n y Demarcaci√≥n</h4>
                            </div>
                            <p class="control-description">Sistemas visuales que gu√≠an y alertan a los conductores sobre condiciones de la v√≠a y comportamientos requeridos.</p>
                            <div class="control-examples">
                                <h5>üéØ Ejemplos Pr√°cticos:</h5>
                                <ul>
                                    <li>Se√±ales reflectivas de alta visibilidad</li>
                                    <li>Demarcaci√≥n horizontal con materiales antideslizantes</li>
                                    <li>Se√±alizaci√≥n variable electr√≥nica</li>
                                    <li>Tachas reflectivas y sonoras</li>
                                    <li>Se√±ales de advertencia anticipada</li>
                                    <li>Demarcaci√≥n de carriles exclusivos</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üö•</span>
                                <h4 class="control-name">Dispositivos de Control de Tr√°fico</h4>
                            </div>
                            <p class="control-description">Sistemas activos que regulan el flujo vehicular y peatonal para minimizar conflictos y mejorar la seguridad.</p>
                            <div class="control-examples">
                                <h5>üéØ Ejemplos Pr√°cticos:</h5>
                                <ul>
                                    <li>Sem√°foros inteligentes con detecci√≥n vehicular</li>
                                    <li>Reductores de velocidad (bandas sonoras)</li>
                                    <li>Barreras de contenci√≥n flexibles</li>
                                    <li>Sistemas de control de acceso</li>
                                    <li>C√°maras de monitoreo en tiempo real</li>
                                    <li>Sistemas de pesaje din√°mico</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üö∂</span>
                                <h4 class="control-name">Infraestructura para Peatones</h4>
                            </div>
                            <p class="control-description">Elementos f√≠sicos que protegen a usuarios vulnerables mediante separaci√≥n y facilidades espec√≠ficas.</p>
                            <div class="control-examples">
                                <h5>üéØ Ejemplos Pr√°cticos:</h5>
                                <ul>
                                    <li>Aceras amplias con barreras de protecci√≥n</li>
                                    <li>Puentes peatonales y pasos subterr√°neos</li>
                                    <li>Ciclov√≠as segregadas f√≠sicamente</li>
                                    <li>Islas de refugio en cruces amplios</li>
                                    <li>Rampas de accesibilidad universal</li>
                                    <li>Iluminaci√≥n espec√≠fica para peatones</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-tool">
                        <h4 style="margin-bottom: 20px;">üîß Calculadora de Efectividad de Controles de Ingenier√≠a</h4>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Tipo de control de ingenier√≠a:</label>
                        <select class="tool-input" id="engineeringControl">
                            <option value="">Seleccionar control</option>
                            <option value="rotonda">Rotonda en intersecci√≥n</option>
                            <option value="barrera">Barrera de contenci√≥n</option>
                            <option value="iluminacion">Mejora de iluminaci√≥n</option>
                            <option value="senalizacion">Se√±alizaci√≥n avanzada</option>
                            <option value="reductor">Reductores de velocidad</option>
                            <option value="separacion">Separaci√≥n f√≠sica de carriles</option>
                        </select>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Volumen de tr√°fico diario:</label>
                        <input type="number" class="tool-input" id="trafficVolume" placeholder="Veh√≠culos por d√≠a">
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Costo estimado de implementaci√≥n (USD):</label>
                        <input type="number" class="tool-input" id="implementationCost" placeholder="Costo en d√≥lares">
                        
                        <button class="tool-btn" onclick="calculateEngineeringEffectiveness()">üìä Calcular Efectividad</button>
                        
                        <div id="engineeringResult" class="tool-result" style="display: none;">
                            <h5 style="margin-bottom: 15px;">üìà An√°lisis de Efectividad</h5>
                            <div id="engineeringResultContent"></div>
                        </div>
                    </div>
                </div>

                <!-- P√°gina 3: Programas Educativos -->
                <div id="page3" class="story-page">
                    <div class="story-header">
                        <h2 class="story-title">üìö Programas Educativos</h2>
                        <p class="story-subtitle">Cap√≠tulo 3: Iniciativas para mejorar conocimiento y comportamiento</p>
                    </div>

                    <div class="story-content">
                        <p>Ana comprendi√≥ que los controles de ingenier√≠a, aunque efectivos, no eran suficientes por s√≠ solos. Los programas educativos son fundamentales para cambiar comportamientos y crear una cultura de seguridad vial sostenible en el tiempo.</p>

                        <div class="quote-box">
                            "La educaci√≥n vial no es solo ense√±ar reglas de tr√°nsito. Es formar ciudadanos conscientes que tomen decisiones seguras incluso cuando nadie los est√° vigilando."
                        </div>
                    </div>

                    <div class="control-details-grid">
                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üì¢</span>
                                <h4 class="control-name">Campa√±as de Concientizaci√≥n</h4>
                            </div>
                            <p class="control-description">Estrategias de comunicaci√≥n masiva para sensibilizar sobre riesgos viales y promover comportamientos seguros.</p>
                            <div class="control-examples">
                                <h5>üéØ Estrategias Efectivas:</h5>
                                <ul>
                                    <li>Campa√±as multimedia con testimonios reales</li>
                                    <li>Mensajes espec√≠ficos por tipo de usuario</li>
                                    <li>Uso de redes sociales y plataformas digitales</li>
                                    <li>Eventos comunitarios de seguridad vial</li>
                                    <li>Alianzas con influenciadores locales</li>
                                    <li>Simuladores de impacto y realidad virtual</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üéì</span>
                                <h4 class="control-name">Educaci√≥n Vial Escolar</h4>
                            </div>
                            <p class="control-description">Programas estructurados para formar desde temprana edad una cultura de seguridad vial y movilidad responsable.</p>
                            <div class="control-examples">
                                <h5>üéØ Componentes del Programa:</h5>
                                <ul>
                                    <li>Curr√≠culo integrado por niveles educativos</li>
                                    <li>Parques de tr√°fico infantil</li>
                                    <li>Brigadas estudiantiles de seguridad vial</li>
                                    <li>Concursos y actividades l√∫dicas</li>
                                    <li>Capacitaci√≥n a docentes especializados</li>
                                    <li>Evaluaci√≥n continua de aprendizajes</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üöó</span>
                                <h4 class="control-name">Capacitaci√≥n de Conductores</h4>
                            </div>
                            <p class="control-description">Programas especializados para mejorar habilidades de conducci√≥n y conocimiento de seguridad vial en conductores activos.</p>
                            <div class="control-examples">
                                <h5>üéØ Modalidades de Capacitaci√≥n:</h5>
                                <ul>
                                    <li>Cursos de manejo defensivo avanzado</li>
                                    <li>Simuladores de conducci√≥n de alta fidelidad</li>
                                    <li>Capacitaci√≥n espec√≠fica por tipo de veh√≠culo</li>
                                    <li>Programas de actualizaci√≥n obligatoria</li>
                                    <li>Entrenamiento en condiciones adversas</li>
                                    <li>Certificaciones internacionales especializadas</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üèòÔ∏è</span>
                                <h4 class="control-name">Programas Comunitarios</h4>
                            </div>
                            <p class="control-description">Iniciativas que involucran a la comunidad local en la promoci√≥n y vigilancia de la seguridad vial en su entorno.</p>
                            <div class="control-examples">
                                <h5>üéØ Actividades Comunitarias:</h5>
                                <ul>
                                    <li>Comit√©s vecinales de seguridad vial</li>
                                    <li>Programas de padres voluntarios en escuelas</li>
                                    <li>Jornadas de educaci√≥n en empresas locales</li>
                                    <li>Actividades intergeneracionales de seguridad</li>
                                    <li>Diagn√≥sticos participativos de riesgos</li>
                                    <li>Redes de reporte ciudadano de incidentes</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-tool">
                        <h4 style="margin-bottom: 20px;">üìö Dise√±ador de Programa Educativo</h4>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">P√∫blico objetivo:</label>
                        <select class="tool-input" id="targetAudience">
                            <option value="">Seleccionar p√∫blico</option>
                            <option value="conductores">Conductores profesionales</option>
                            <option value="estudiantes">Estudiantes escolares</option>
                            <option value="peatones">Peatones y ciclistas</option>
                            <option value="empresas">Trabajadores de empresas</option>
                            <option value="comunidad">Comunidad general</option>
                        </select>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Problema principal a abordar:</label>
                        <select class="tool-input" id="mainProblem">
                            <option value="">Seleccionar problema</option>
                            <option value="velocidad">Exceso de velocidad</option>
                            <option value="alcohol">Conducci√≥n bajo efectos del alcohol</option>
                            <option value="distraccion">Distracci√≥n al volante</option>
                            <option value="fatiga">Fatiga del conductor</option>
                            <option value="peatones">Comportamiento inseguro de peatones</option>
                        </select>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Presupuesto disponible (USD):</label>
                        <input type="number" class="tool-input" id="educationBudget" placeholder="Presupuesto en d√≥lares">
                        
                        <button class="tool-btn" onclick="generateEducationProgram()">üéØ Generar Programa</button>
                        
                        <div id="educationResult" class="tool-result" style="display: none;">
                            <h5 style="margin-bottom: 15px;">üìã Programa Educativo Personalizado</h5>
                            <div id="educationResultContent"></div>
                        </div>
                    </div>
                </div>

                <!-- P√°gina 4: Enforcement (Cumplimiento) -->
                <div id="page4" class="story-page">
                    <div class="story-header">
                        <h2 class="story-title">‚öñÔ∏è Enforcement - Cumplimiento</h2>
                        <p class="story-subtitle">Cap√≠tulo 4: Medidas regulatorias y de control para asegurar el cumplimiento</p>
                    </div>

                    <div class="story-content">
                        <p>Ana aprendi√≥ que el enforcement efectivo no se trata solo de multas y sanciones, sino de crear un sistema integral que disuada comportamientos riesgosos y refuerce las normas de seguridad vial de manera justa y consistente.</p>

                        <div class="quote-box">
                            "El enforcement efectivo es predecible, justo y visible. No busca recaudar, busca cambiar comportamientos. Una multa que educa vale m√°s que cien que solo castigan."
                        </div>
                    </div>

                    <div class="control-details-grid">
                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üì°</span>
                                <h4 class="control-name">Control de Velocidad</h4>
                            </div>
                            <p class="control-description">Sistemas tecnol√≥gicos y operativos para monitorear y controlar la velocidad vehicular en diferentes tipos de v√≠as.</p>
                            <div class="control-examples">
                                <h5>üéØ Tecnolog√≠as y M√©todos:</h5>
                                <ul>
                                    <li>Radares fijos y m√≥viles de √∫ltima generaci√≥n</li>
                                    <li>Sistemas de control de velocidad promedio</li>
                                    <li>C√°maras inteligentes con IA</li>
                                    <li>Reductores f√≠sicos de velocidad</li>
                                    <li>Patrullaje estrat√©gico en puntos cr√≠ticos</li>
                                    <li>Sistemas de alerta temprana para conductores</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üç∑</span>
                                <h4 class="control-name">Fiscalizaci√≥n de Alcohol</h4>
                            </div>
                            <p class="control-description">Programas sistem√°ticos para detectar y sancionar la conducci√≥n bajo efectos del alcohol y otras sustancias.</p>
                            <div class="control-examples">
                                <h5>üéØ Estrategias de Control:</h5>
                                <ul>
                                    <li>Controles aleatorios de alcoholemia</li>
                                    <li>Operativos en horarios y lugares estrat√©gicos</li>
                                    <li>Equipos de detecci√≥n de √∫ltima generaci√≥n</li>
                                    <li>Protocolos estandarizados de procedimiento</li>
                                    <li>Coordinaci√≥n interinstitucional efectiva</li>
                                    <li>Programas de rehabilitaci√≥n para infractores</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üìÑ</span>
                                <h4 class="control-name">Control de Documentos</h4>
                            </div>
                            <p class="control-description">Verificaci√≥n sistem√°tica de la documentaci√≥n vehicular y de conductores para asegurar el cumplimiento legal.</p>
                            <div class="control-examples">
                                <h5>üéØ Documentos Verificados:</h5>
                                <ul>
                                    <li>Licencias de conducir vigentes y apropiadas</li>
                                    <li>Documentos de propiedad vehicular</li>
                                    <li>Seguros obligatorios actualizados</li>
                                    <li>Certificados de revisi√≥n t√©cnica</li>
                                    <li>Permisos especiales de carga</li>
                                    <li>Documentaci√≥n de transporte de mercanc√≠as</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">‚öñÔ∏è</span>
                                <h4 class="control-name">Sanciones Efectivas</h4>
                            </div>
                            <p class="control-description">Sistema de sanciones proporcionales y disuasivas que promuevan el cambio de comportamiento y la cultura de seguridad.</p>
                            <div class="control-examples">
                                <h5>üéØ Tipos de Sanciones:</h5>
                                <ul>
                                    <li>Multas proporcionales a la gravedad</li>
                                    <li>Suspensi√≥n temporal de licencias</li>
                                    <li>Cursos obligatorios de reeducaci√≥n vial</li>
                                    <li>Trabajo comunitario en seguridad vial</li>
                                    <li>Inmovilizaci√≥n de veh√≠culos en casos graves</li>
                                    <li>Sistemas de puntos en licencias de conducir</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-tool">
                        <h4 style="margin-bottom: 20px;">‚öñÔ∏è Calculadora de Efectividad de Enforcement</h4>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Tipo de infracci√≥n objetivo:</label>
                        <select class="tool-input" id="violationType">
                            <option value="">Seleccionar infracci√≥n</option>
                            <option value="velocidad">Exceso de velocidad</option>
                            <option value="alcohol">Conducci√≥n bajo efectos del alcohol</option>
                            <option value="documentos">Falta de documentaci√≥n</option>
                            <option value="semaforo">Irrespeto a sem√°foros</option>
                            <option value="adelantamiento">Adelantamientos peligrosos</option>
                        </select>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Frecuencia de controles (por semana):</label>
                        <input type="number" class="tool-input" id="controlFrequency" placeholder="N√∫mero de controles semanales">
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Monto de la sanci√≥n (USD):</label>
                        <input type="number" class="tool-input" id="fineAmount" placeholder="Valor de la multa">
                        
                        <button class="tool-btn" onclick="calculateEnforcementEffectiveness()">üìä Calcular Impacto</button>
                        
                        <div id="enforcementResult" class="tool-result" style="display: none;">
                            <h5 style="margin-bottom: 15px;">üìà An√°lisis de Efectividad del Enforcement</h5>
                            <div id="enforcementResultContent"></div>
                        </div>
                    </div>
                </div>

                <!-- P√°gina 5: IA Aplicada a Controles -->
                <div id="page5" class="story-page">
                    <div class="story-header">
                        <h2 class="story-title">ü§ñ IA Aplicada a la Definici√≥n de Controles</h2>
                        <p class="story-subtitle">Cap√≠tulo 5: Ana descubre c√≥mo la Inteligencia Artificial revoluciona la seguridad vial</p>
                    </div>

                    <div class="character-intro">
                        <div class="character-avatar">üë©‚Äçüíª</div>
                        <div class="character-info">
                            <h3>Ana Rodr√≠guez - Innovaci√≥n Tecnol√≥gica</h3>
                            <p>En su quinto d√≠a, Ana descubre que la Inteligencia Artificial no es solo una herramienta futurista, sino una realidad presente que puede transformar completamente c√≥mo identificamos, analizamos e implementamos controles de seguridad vial de manera m√°s precisa y eficiente.</p>
                        </div>
                    </div>

                    <div class="story-content">
                        <p>Mientras revisaba los datos de accidentalidad de la semana, Ana se dio cuenta de que hab√≠a patrones complejos que escapaban al an√°lisis tradicional. Fue entonces cuando su supervisor le present√≥ las nuevas herramientas de IA que TransLog√≠stica hab√≠a comenzado a implementar.</p>

                        <div class="quote-box">
                            "Ana, la IA no reemplaza nuestro criterio profesional, lo potencia. Puede procesar millones de datos en segundos y encontrar patrones que nos tomar√≠a meses identificar. Pero somos nosotros quienes interpretamos y decidimos."
                        </div>

                        <p>Ana comprendi√≥ que la IA en seguridad vial opera en tres niveles fundamentales: an√°lisis predictivo, optimizaci√≥n de controles y monitoreo inteligente en tiempo real.</p>
                    </div>

                    <div class="control-details-grid">
                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üîç</span>
                                <h4 class="control-name">An√°lisis Predictivo de Riesgos</h4>
                            </div>
                            <p class="control-description">Algoritmos de machine learning que analizan patrones hist√≥ricos para predecir d√≥nde y cu√°ndo es m√°s probable que ocurran accidentes.</p>
                            <div class="control-examples">
                                <h5>üéØ Aplicaciones Pr√°cticas:</h5>
                                <ul>
                                    <li>An√°lisis de puntos negros con precisi√≥n geogr√°fica</li>
                                    <li>Predicci√≥n de accidentes por condiciones clim√°ticas</li>
                                    <li>Identificaci√≥n de patrones temporales de riesgo</li>
                                    <li>Correlaci√≥n de m√∫ltiples variables de riesgo</li>
                                    <li>Modelos predictivos de comportamiento de tr√°fico</li>
                                    <li>An√°lisis de riesgo por tipo de usuario vial</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">‚öôÔ∏è</span>
                                <h4 class="control-name">Optimizaci√≥n Inteligente de Controles</h4>
                            </div>
                            <p class="control-description">Sistemas de IA que determinan la combinaci√≥n √≥ptima de controles seg√∫n m√∫ltiples variables y restricciones presupuestarias.</p>
                            <div class="control-examples">
                                <h5>üéØ Capacidades del Sistema:</h5>
                                <ul>
                                    <li>Optimizaci√≥n de ubicaci√≥n de sem√°foros inteligentes</li>
                                    <li>C√°lculo de ROI para diferentes tipos de control</li>
                                    <li>Simulaci√≥n de escenarios de implementaci√≥n</li>
                                    <li>Priorizaci√≥n autom√°tica seg√∫n impacto esperado</li>
                                    <li>An√°lisis costo-beneficio multivariable</li>
                                    <li>Recomendaciones personalizadas por contexto</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üì°</span>
                                <h4 class="control-name">Monitoreo en Tiempo Real</h4>
                            </div>
                            <p class="control-description">Sistemas IoT y visi√≥n artificial que monitoriean continuamente las condiciones viales y ajustan controles autom√°ticamente.</p>
                            <div class="control-examples">
                                <h5>üéØ Tecnolog√≠as Integradas:</h5>
                                <ul>
                                    <li>C√°maras con reconocimiento de patrones de tr√°fico</li>
                                    <li>Sensores de condiciones ambientales</li>
                                    <li>Ajuste autom√°tico de se√±alizaci√≥n variable</li>
                                    <li>Detecci√≥n de incidentes en tiempo real</li>
                                    <li>Alertas predictivas de congesti√≥n</li>
                                    <li>Respuesta autom√°tica a emergencias</li>
                                </ul>
                            </div>
                        </div>

                        <div class="control-card">
                            <div class="control-header">
                                <span class="control-icon">üß†</span>
                                <h4 class="control-name">Aprendizaje Continuo</h4>
                            </div>
                            <p class="control-description">Sistemas que aprenden de cada intervenci√≥n y mejoran continuamente las recomendaciones de controles.</p>
                            <div class="control-examples">
                                <h5>üéØ Procesos de Mejora:</h5>
                                <ul>
                                    <li>Evaluaci√≥n autom√°tica de efectividad de controles</li>
                                    <li>Refinamiento de modelos predictivos</li>
                                    <li>Adaptaci√≥n a cambios en patrones de tr√°fico</li>
                                    <li>Incorporaci√≥n de nuevas fuentes de datos</li>
                                    <li>Actualizaci√≥n de algoritmos de optimizaci√≥n</li>
                                    <li>Benchmarking autom√°tico con mejores pr√°cticas</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="interactive-tool">
                        <h4 style="margin-bottom: 20px;">ü§ñ Simulador de IA para Definici√≥n de Controles</h4>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Datos disponibles para an√°lisis:</label>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="accidentData" style="margin-right: 8px;"> Historial de accidentes (5 a√±os)
                            </label>
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="trafficData" style="margin-right: 8px;"> Datos de tr√°fico en tiempo real
                            </label>
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="weatherData" style="margin-right: 8px;"> Informaci√≥n meteorol√≥gica
                            </label>
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="infraData" style="margin-right: 8px;"> Estado de infraestructura
                            </label>
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="behaviorData" style="margin-right: 8px;"> Patrones de comportamiento
                            </label>
                            <label style="display: flex; align-items: center; color: white;">
                                <input type="checkbox" id="economicData" style="margin-right: 8px;"> Datos socioecon√≥micos
                            </label>
                        </div>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Tipo de an√°lisis de IA:</label>
                        <select class="tool-input" id="aiAnalysisType">
                            <option value="">Seleccionar tipo de an√°lisis</option>
                            <option value="predictive">An√°lisis Predictivo de Riesgos</option>
                            <option value="optimization">Optimizaci√≥n de Controles</option>
                            <option value="realtime">Monitoreo en Tiempo Real</option>
                            <option value="comprehensive">An√°lisis Integral Multivariable</option>
                        </select>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">√Årea de estudio (km¬≤):</label>
                        <input type="number" class="tool-input" id="studyArea" placeholder="√Årea en kil√≥metros cuadrados">
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Presupuesto para implementaci√≥n (USD):</label>
                        <input type="number" class="tool-input" id="aiBudget" placeholder="Presupuesto disponible">
                        
                        <button class="tool-btn" onclick="runAIAnalysis()">üöÄ Ejecutar An√°lisis de IA</button>
                        
                        <div id="aiResult" class="tool-result" style="display: none;">
                            <h5 style="margin-bottom: 15px;">ü§ñ Resultados del An√°lisis de IA</h5>
                            <div id="aiResultContent"></div>
                        </div>
                    </div>

                    <div class="eureka-moment">
                        <h4>üí° Revoluci√≥n en la Toma de Decisiones</h4>
                        <p>"La IA no solo nos dice qu√© controles implementar, sino cu√°ndo, d√≥nde y c√≥mo hacerlo de la manera m√°s efectiva. Transforma datos en decisiones inteligentes que salvan vidas y optimizan recursos de manera que nunca antes hab√≠amos imaginado."</p>
                    </div>

                    <div class="learning-objectives">
                        <h4>üéØ Beneficios Clave de la IA en Controles de Seguridad:</h4>
                        <ul>
                            <li>Precisi√≥n en la identificaci√≥n de riesgos hasta 10 veces mayor que m√©todos tradicionales</li>
                            <li>Optimizaci√≥n de recursos con mejoras del 40-60% en eficiencia presupuestaria</li>
                            <li>Respuesta en tiempo real a condiciones cambiantes del tr√°fico</li>
                            <li>Aprendizaje continuo que mejora las recomendaciones con cada implementaci√≥n</li>
                            <li>Integraci√≥n de m√∫ltiples fuentes de datos para an√°lisis hol√≠stico</li>
                            <li>Predicci√≥n de efectividad antes de la implementaci√≥n f√≠sica</li>
                        </ul>
                    </div>
                </div>

                <!-- P√°gina 6: Aplicaci√≥n Pr√°ctica -->
                <div id="page6" class="story-page">
                    <div class="story-header">
                        <h2 class="story-title">üéØ Aplicaci√≥n Pr√°ctica Integral</h2>
                        <p class="story-subtitle">Cap√≠tulo 6: Ana integra las 3 E's con IA en una estrategia integral</p>
                    </div>

                    <div class="story-content">
                        <p>Despu√©s de estudiar cada componente por separado y descubrir el poder de la IA, Ana comprendi√≥ que la verdadera efectividad se logra integrando las 3 E's (Ingenier√≠a, Educaci√≥n y Enforcement) potenciadas por Inteligencia Artificial en una estrategia coherente y complementaria.</p>

                        <div class="quote-box">
                            "Las 3 E's potenciadas por IA no solo se complementan, se amplifican exponencialmente. La IA nos permite implementar la ingenier√≠a m√°s precisa, la educaci√≥n m√°s personalizada, y el enforcement m√°s inteligente. Es la evoluci√≥n natural de la seguridad vial."
                        </div>
                    </div>

                    <div class="three-es-grid">
                        <div class="e-card engineering-card">
                            <div class="e-header">
                                <span class="e-icon">üèóÔ∏è</span>
                                <h4 class="e-title">INGENIER√çA</h4>
                            </div>
                            <p class="e-description">Modificaciones f√≠sicas del entorno vial para reducir riesgos de manera pasiva y continua.</p>
                            <ul class="e-examples">
                                <li>Control de velocidad mediante radares y reductores</li>
                                <li>Mejora de visibilidad con iluminaci√≥n y se√±alizaci√≥n</li>
                                <li>Separaci√≥n f√≠sica de usuarios vulnerables</li>
                                <li>Dise√±o geom√©trico que perdona errores</li>
                                <li>Dispositivos de contenci√≥n y protecci√≥n</li>
                            </ul>
                        </div>

                        <div class="e-card education-card">
                            <div class="e-header">
                                <span class="e-icon">üìö</span>
                                <h4 class="e-title">EDUCACI√ìN</h4>
                            </div>
                            <p class="e-description">Programas para mejorar conocimientos, habilidades y actitudes hacia la seguridad vial.</p>
                            <ul class="e-examples">
                                <li>Campa√±as de concientizaci√≥n masiva</li>
                                <li>Educaci√≥n vial desde la infancia</li>
                                <li>Capacitaci√≥n especializada de conductores</li>
                                <li>Programas comunitarios participativos</li>
                                <li>Formaci√≥n continua y actualizaci√≥n</li>
                            </ul>
                        </div>

                        <div class="e-card enforcement-card">
                            <div class="e-header">
                                <span class="e-icon">‚öñÔ∏è</span>
                                <h4 class="e-title">ENFORCEMENT</h4>
                            </div>
                            <p class="e-description">Medidas regulatorias y de control para asegurar el cumplimiento de normas de seguridad.</p>
                            <ul class="e-examples">
                                <li>Control tecnol√≥gico de velocidad</li>
                                <li>Fiscalizaci√≥n sistem√°tica de alcohol</li>
                                <li>Verificaci√≥n de documentos y permisos</li>
                                <li>Sanciones proporcionales y educativas</li>
                                <li>Patrullaje estrat√©gico y visible</li>
                            </ul>
                        </div>
                    </div>

                    <div class="interactive-tool">
                        <h4 style="margin-bottom: 20px;">üéØ Generador de Estrategia Integral 3 E's</h4>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Problema de seguridad vial identificado:</label>
                        <textarea class="tool-input" id="safetyProblem" rows="3" placeholder="Describe el problema espec√≠fico de seguridad vial que necesitas abordar..."></textarea>
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ubicaci√≥n del problema:</label>
                        <input type="text" class="tool-input" id="problemLocation" placeholder="Ej: Intersecci√≥n Av. Principal con Calle 45">
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Presupuesto total disponible (USD):</label>
                        <input type="number" class="tool-input" id="totalBudget" placeholder="Presupuesto total para la intervenci√≥n">
                        
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Prioridad de implementaci√≥n:</label>
                        <select class="tool-input" id="implementationPriority">
                            <option value="">Seleccionar prioridad</option>
                            <option value="inmediata">Inmediata (0-3 meses)</option>
                            <option value="corto">Corto plazo (3-12 meses)</option>
                            <option value="mediano">Mediano plazo (1-3 a√±os)</option>
                            <option value="largo">Largo plazo (3+ a√±os)</option>
                        </select>
                        
                        <button class="tool-btn" onclick="generateIntegratedStrategy()">üöÄ Generar Estrategia Integral</button>
                        
                        <div id="strategyResult" class="tool-result" style="display: none;">
                            <h5 style="margin-bottom: 15px;">üìã Estrategia Integral de las 3 E's</h5>
                            <div id="strategyResultContent"></div>
                        </div>
                    </div>

                    <div class="eureka-moment">
                        <h4>üí° Lecci√≥n Final de Ana</h4>
                        <p>"Implementar las 3 E's potenciadas por IA no es solo una estrategia t√©cnica, es un compromiso con la vida y el futuro. Cada algoritmo que entrenamos, cada control inteligente que implementamos, cada programa educativo personalizado que dise√±amos, tiene el potencial de salvar vidas y transformar comunidades de manera m√°s efectiva que nunca antes."</p>
                    </div>
                </div>

                <!-- Navegaci√≥n entre p√°ginas -->
                <div class="page-navigation">
                    <button id="prevBtn" class="nav-btn" onclick="changePage(-1)">‚Üê Anterior</button>
                    
                    <div class="page-indicators">
                        <div class="page-dot active" onclick="goToPage(1)"></div>
                        <div class="page-dot" onclick="goToPage(2)"></div>
                        <div class="page-dot" onclick="goToPage(3)"></div>
                        <div class="page-dot" onclick="goToPage(4)"></div>
                        <div class="page-dot" onclick="goToPage(5)"></div>
                        <div class="page-dot" onclick="goToPage(6)"></div>
                    </div>
                    
                    <button id="nextBtn" class="nav-btn" onclick="changePage(1)">Siguiente ‚Üí</button>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal para detalles de controles -->
    <div id="controlModal" class="modal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modalTitle" style="margin: 0; color: #2d3748;">Detalles del Control</h2>
                <button class="close-btn" onclick="closeControlModal()">√ó</button>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        let microcourseTimer;
        let timeRemaining = 1200; // 20 minutes
        let isRunning = false;

        function startMicrocourse() {
            if (!isRunning) {
                isRunning = true;
                microcourseTimer = setInterval(updateTimer, 1000);
                document.querySelector('.start-btn').textContent = 'Pausar Microcurso';
                document.querySelector('.start-btn').style.background = 'rgba(255,255,255,0.3)';
            } else {
                pauseMicrocourse();
            }
        }

        function pauseMicrocourse() {
            isRunning = false;
            clearInterval(microcourseTimer);
            document.querySelector('.start-btn').textContent = 'Continuar Microcurso';
            document.querySelector('.start-btn').style.background = 'rgba(255,255,255,0.2)';
        }

        function updateTimer() {
            timeRemaining--;
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeRemaining <= 0) {
                clearInterval(microcourseTimer);
                completeMicrocourse();
            }
        }

        function completeMicrocourse() {
            document.getElementById('timerDisplay').textContent = '¬°Completado!';
            document.querySelector('.start-btn').textContent = 'Microcurso Finalizado';
            document.querySelector('.start-btn').disabled = true;
            document.querySelector('.start-btn').style.opacity = '0.6';
        }

        // Page navigation variables
        let currentPage = 1;
        const totalPages = 6;

        // Page navigation functions
        function goToPage(pageNumber) {
            if (pageNumber < 1 || pageNumber > totalPages) return;
            
            // Hide all pages
            document.querySelectorAll('.story-page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(`page${pageNumber}`).classList.add('active');
            
            // Update navigation
            updateNavigation(pageNumber);
            updateSidebarNavigation(pageNumber);
            updatePageIndicators(pageNumber);
            
            currentPage = pageNumber;
            
            // Scroll to top of main content
            const mainContent = document.querySelector('.main-content');
            mainContent.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function changePage(direction) {
            const newPage = currentPage + direction;
            goToPage(newPage);
            
            // Scroll to top of the page
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function updateNavigation(pageNumber) {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = pageNumber === 1;
            nextBtn.disabled = pageNumber === totalPages;
            
            if (pageNumber === totalPages) {
                nextBtn.textContent = 'üéâ Finalizar';
            } else {
                nextBtn.textContent = 'Siguiente ‚Üí';
            }
        }

        function updateSidebarNavigation(pageNumber) {
            // Update sidebar navigation
            document.querySelectorAll('.module-item').forEach((item, index) => {
                item.classList.remove('active');
                if (index + 1 === pageNumber) {
                    item.classList.add('active');
                }
            });
            
            // Update horizontal navigation
            document.querySelectorAll('.horizontal-nav-item').forEach((item) => {
                item.classList.remove('active');
                if (parseInt(item.dataset.page) === pageNumber) {
                    item.classList.add('active');
                }
            });
        }

        function updatePageIndicators(pageNumber) {
            document.querySelectorAll('.page-dot').forEach((dot, index) => {
                dot.classList.remove('active');
                if (index + 1 === pageNumber) {
                    dot.classList.add('active');
                }
            });
        }

        // Control details modal
        function showControlDetails(controlType) {
            const controlDetails = {
                eliminacion: {
                    title: 'üö´ ELIMINACI√ìN - Nivel 1',
                    content: `
                        <div style="background: linear-gradient(135deg, #e53e3e, #c53030); color: white; padding: 30px; border-radius: 16px; margin-bottom: 25px;">
                            <h3 style="margin: 0 0 15px 0;">M√°xima Efectividad - 95-100%</h3>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.6;">Remover completamente el peligro del entorno de trabajo o vial.</p>
                        </div>
                        
                        <div style="background: #f7fafc; padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #2d3748; margin-bottom: 15px;">üéØ Ejemplos en Seguridad Vial:</h4>
                            <ul style="color: #4a5568; line-height: 1.8;">
                                <li><strong>Cierre de intersecciones peligrosas:</strong> Eliminar cruces con alta accidentalidad</li>
                                <li><strong>Prohibici√≥n de tr√°nsito pesado:</strong> En v√≠as no aptas para grandes veh√≠culos</li>
                                <li><strong>Eliminaci√≥n de curvas peligrosas:</strong> Mediante rectificaci√≥n de trazado</li>
                                <li><strong>Cierre de accesos riesgosos:</strong> Consolidar accesos en puntos seguros</li>
                                <li><strong>Eliminaci√≥n de puntos ciegos:</strong> Mediante redise√±o geom√©trico</li>
                            </ul>
                        </div>
                        
                        <div style="background: #e6fffa; padding: 20px; border-radius: 12px; border-left: 4px solid #4facfe;">
                            <h5 style="color: #2d3748; margin: 0 0 10px 0;">üí° Ventajas:</h5>
                            <p style="color: #4a5568; margin: 0;">‚Ä¢ Protecci√≥n permanente ‚Ä¢ No requiere mantenimiento ‚Ä¢ Independiente del comportamiento humano ‚Ä¢ Costo-efectivo a largo plazo</p>
                        </div>
                    `
                },
                sustitucion: {
                    title: 'üîÑ SUSTITUCI√ìN - Nivel 2',
                    content: `
                        <div style="background: linear-gradient(135deg, #ed8936, #dd6b20); color: white; padding: 30px; border-radius: 16px; margin-bottom: 25px;">
                            <h3 style="margin: 0 0 15px 0;">Alta Efectividad - 80-95%</h3>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.6;">Reemplazar el peligro por algo menos riesgoso pero funcionalmente equivalente.</p>
                        </div>
                        
                        <div style="background: #f7fafc; padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #2d3748; margin-bottom: 15px;">üéØ Ejemplos en Seguridad Vial:</h4>
                            <ul style="color: #4a5568; line-height: 1.8;">
                                <li><strong>Rotondas por sem√°foros:</strong> En intersecciones con alta conflictividad</li>
                                <li><strong>Pasos a desnivel:</strong> Sustituyendo cruces peatonales a nivel</li>
                                <li><strong>V√≠as alternas m√°s seguras:</strong> Redirigir tr√°fico por rutas menos riesgosas</li>
                                <li><strong>Materiales m√°s seguros:</strong> Postes flexibles en lugar de r√≠gidos</li>
                                <li><strong>Tecnolog√≠a m√°s avanzada:</strong> LED por iluminaci√≥n convencional</li>
                            </ul>
                        </div>
                        
                        <div style="background: #fff7ed; padding: 20px; border-radius: 12px; border-left: 4px solid #ed8936;">
                            <h5 style="color: #2d3748; margin: 0 0 10px 0;">üí° Consideraciones:</h5>
                            <p style="color: #4a5568; margin: 0;">‚Ä¢ Evaluar costo-beneficio ‚Ä¢ Mantener funcionalidad ‚Ä¢ Considerar aceptaci√≥n social ‚Ä¢ Planificar transici√≥n gradual</p>
                        </div>
                    `
                },
                ingenieria: {
                    title: 'üîß CONTROLES DE INGENIER√çA - Nivel 3',
                    content: `
                        <div style="background: linear-gradient(135deg, #d69e2e, #b7791f); color: white; padding: 30px; border-radius: 16px; margin-bottom: 25px;">
                            <h3 style="margin: 0 0 15px 0;">Efectividad Media-Alta - 60-80%</h3>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.6;">Aislar a las personas del peligro mediante barreras f√≠sicas o modificaciones del entorno.</p>
                        </div>
                        
                        <div style="background: #f7fafc; padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #2d3748; margin-bottom: 15px;">üéØ Ejemplos en Seguridad Vial:</h4>
                            <ul style="color: #4a5568; line-height: 1.8;">
                                <li><strong>Barreras de contenci√≥n:</strong> Separar carriles y proteger obst√°culos</li>
                                <li><strong>Reductores de velocidad:</strong> Bandas sonoras y resaltos</li>
                                <li><strong>Iluminaci√≥n mejorada:</strong> Sistemas LED inteligentes</li>
                                <li><strong>Se√±alizaci√≥n avanzada:</strong> Paneles de mensaje variable</li>
                                <li><strong>Sistemas de drenaje:</strong> Prevenir acumulaci√≥n de agua</li>
                                <li><strong>Pavimentos especiales:</strong> Antideslizantes en curvas</li>
                            </ul>
                        </div>
                        
                        <div style="background: #fff3cd; padding: 20px; border-radius: 12px; border-left: 4px solid #d69e2e;">
                            <h5 style="color: #2d3748; margin: 0 0 10px 0;">üí° Caracter√≠sticas:</h5>
                            <p style="color: #4a5568; margin: 0;">‚Ä¢ Protecci√≥n pasiva continua ‚Ä¢ Requiere mantenimiento ‚Ä¢ Inversi√≥n inicial significativa ‚Ä¢ Efectividad comprobada</p>
                        </div>
                    `
                },
                administrativo: {
                    title: 'üìã CONTROLES ADMINISTRATIVOS - Nivel 4',
                    content: `
                        <div style="background: linear-gradient(135deg, #38a169, #2f855a); color: white; padding: 30px; border-radius: 16px; margin-bottom: 25px;">
                            <h3 style="margin: 0 0 15px 0;">Efectividad Media - 30-60%</h3>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.6;">Cambiar la forma de trabajar o comportarse mediante pol√≠ticas, procedimientos y capacitaci√≥n.</p>
                        </div>
                        
                        <div style="background: #f7fafc; padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #2d3748; margin-bottom: 15px;">üéØ Ejemplos en Seguridad Vial:</h4>
                            <ul style="color: #4a5568; line-height: 1.8;">
                                <li><strong>Pol√≠ticas de velocidad:</strong> L√≠mites espec√≠ficos por condiciones</li>
                                <li><strong>Horarios de circulaci√≥n:</strong> Restricciones para veh√≠culos pesados</li>
                                <li><strong>Capacitaci√≥n obligatoria:</strong> Cursos de manejo defensivo</li>
                                <li><strong>Procedimientos de emergencia:</strong> Protocolos de respuesta</li>
                                <li><strong>Sistemas de rotaci√≥n:</strong> Prevenir fatiga en conductores</li>
                                <li><strong>Inspecciones regulares:</strong> Veh√≠culos y equipos de seguridad</li>
                            </ul>
                        </div>
                        
                        <div style="background: #f0fff4; padding: 20px; border-radius: 12px; border-left: 4px solid #38a169;">
                            <h5 style="color: #2d3748; margin: 0 0 10px 0;">üí° Limitaciones:</h5>
                            <p style="color: #4a5568; margin: 0;">‚Ä¢ Depende del comportamiento humano ‚Ä¢ Requiere supervisi√≥n constante ‚Ä¢ Efectividad variable ‚Ä¢ Necesita refuerzo continuo</p>
                        </div>
                    `
                },
                epp: {
                    title: 'ü¶∫ EQUIPOS DE PROTECCI√ìN PERSONAL - Nivel 5',
                    content: `
                        <div style="background: linear-gradient(135deg, #3182ce, #2c5282); color: white; padding: 30px; border-radius: 16px; margin-bottom: 25px;">
                            <h3 style="margin: 0 0 15px 0;">Efectividad Baja - 10-30%</h3>
                            <p style="margin: 0; font-size: 1.1rem; line-height: 1.6;">Proteger al individuo mediante equipos de uso personal.</p>
                        </div>
                        
                        <div style="background: #f7fafc; padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #2d3748; margin-bottom: 15px;">üéØ Ejemplos en Seguridad Vial:</h4>
                            <ul style="color: #4a5568; line-height: 1.8;">
                                <li><strong>Cinturones de seguridad:</strong> Protecci√≥n en caso de impacto</li>
                                <li><strong>Cascos para motociclistas:</strong> Protecci√≥n craneal</li>
                                <li><strong>Chalecos reflectivos:</strong> Visibilidad de trabajadores viales</li>
                                <li><strong>Sistemas de retenci√≥n infantil:</strong> Sillas y asientos especiales</li>
                                <li><strong>Equipos de comunicaci√≥n:</strong> Manos libres para conductores</li>
                                <li><strong>Gafas de protecci√≥n:</strong> Para condiciones adversas</li>
                            </ul>
                        </div>
                        
                        <div style="background: #e6fffa; padding: 20px; border-radius: 12px; border-left: 4px solid #3182ce;">
                            <h5 style="color: #2d3748; margin: 0 0 10px 0;">üí° Consideraciones Cr√≠ticas:</h5>
                            <p style="color: #4a5568; margin: 0;">‚Ä¢ √öltimo recurso en la jerarqu√≠a ‚Ä¢ Protege solo al usuario ‚Ä¢ Requiere uso correcto y constante ‚Ä¢ Falla si no se usa adecuadamente</p>
                        </div>
                    `
                }
            };

            const details = controlDetails[controlType];
            if (details) {
                document.getElementById('modalTitle').textContent = details.title;
                document.getElementById('modalContent').innerHTML = details.content;
                document.getElementById('controlModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeControlModal() {
            document.getElementById('controlModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Interactive tool functions
        function calculateEngineeringEffectiveness() {
            const control = document.getElementById('engineeringControl').value;
            const traffic = parseInt(document.getElementById('trafficVolume').value);
            const cost = parseInt(document.getElementById('implementationCost').value);

            if (!control || !traffic || !cost) {
                showToolResult('engineeringResult', 'Por favor, completa todos los campos.');
                return;
            }

            const effectiveness = {
                rotonda: { reduction: 40, maintenance: 'Bajo', lifespan: 25 },
                barrera: { reduction: 60, maintenance: 'Medio', lifespan: 15 },
                iluminacion: { reduction: 30, maintenance: 'Bajo', lifespan: 10 },
                senalizacion: { reduction: 25, maintenance: 'Medio', lifespan: 8 },
                reductor: { reduction: 35, maintenance: 'Alto', lifespan: 5 },
                separacion: { reduction: 50, maintenance: 'Bajo', lifespan: 20 }
            };

            const data = effectiveness[control];
            const annualSavings = (traffic * 365 * 0.001 * data.reduction / 100) * 50000; // Estimaci√≥n de ahorro por accidentes evitados
            const roi = ((annualSavings * data.lifespan) - cost) / cost * 100;

            const result = `
                <div style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px; color: #2d3748;">
                    <h6 style="color: #667eea; margin-bottom: 15px;">üìä An√°lisis de Efectividad</h6>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div>
                            <strong>Reducci√≥n de accidentes:</strong><br>
                            <span style="color: #48bb78; font-size: 1.5rem;">${data.reduction}%</span>
                        </div>
                        <div>
                            <strong>ROI estimado:</strong><br>
                            <span style="color: ${roi > 0 ? '#48bb78' : '#e53e3e'}; font-size: 1.5rem;">${roi.toFixed(1)}%</span>
                        </div>
                    </div>
                    <div style="background: #f7fafc; padding: 15px; border-radius: 8px;">
                        <p style="margin: 0; color: #4a5568;"><strong>Vida √∫til:</strong> ${data.lifespan} a√±os</p>
                        <p style="margin: 5px 0 0 0; color: #4a5568;"><strong>Mantenimiento:</strong> ${data.maintenance}</p>
                        <p style="margin: 5px 0 0 0; color: #4a5568;"><strong>Ahorro anual estimado:</strong> $${annualSavings.toLocaleString()} USD</p>
                    </div>
                </div>
            `;

            showToolResult('engineeringResult', result);
        }

        function generateEducationProgram() {
            const audience = document.getElementById('targetAudience').value;
            const problem = document.getElementById('mainProblem').value;
            const budget = parseInt(document.getElementById('educationBudget').value);

            if (!audience || !problem || !budget) {
                showToolResult('educationResult', 'Por favor, completa todos los campos.');
                return;
            }

            const programs = {
                conductores: {
                    velocidad: ['Simuladores de impacto', 'Talleres de f√≠sica del accidente', 'Testimonios de v√≠ctimas'],
                    alcohol: ['Programas de rehabilitaci√≥n', 'Campa√±as de conductor designado', 'Educaci√≥n sobre efectos'],
                    distraccion: ['Talleres de concentraci√≥n', 'Campa√±as anti-celular', 'T√©cnicas de mindfulness'],
                    fatiga: ['Gesti√≥n del sue√±o', 'Reconocimiento de s√≠ntomas', 'Planificaci√≥n de descansos']
                },
                estudiantes: {
                    velocidad: ['Parques de tr√°fico', 'Juegos educativos', 'Competencias de seguridad'],
                    alcohol: ['Educaci√≥n preventiva', 'Talleres con padres', 'Campa√±as peer-to-peer'],
                    distraccion: ['Educaci√≥n digital responsable', 'Talleres de atenci√≥n plena', 'Simuladores'],
                    peatones: ['Educaci√≥n vial b√°sica', 'Pr√°cticas supervisadas', 'Brigadas escolares']
                }
            };

            let budgetLevel = budget < 10000 ? 'b√°sico' : budget < 50000 ? 'intermedio' : 'avanzado';
            let activities = programs[audience]?.[problem] || ['Programa personalizado requerido'];

            const result = `
                <div style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px; color: #2d3748;">
                    <h6 style="color: #48bb78; margin-bottom: 15px;">üìã Programa Educativo Personalizado</h6>
                    <div style="background: #f7fafc; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                        <p style="margin: 0;"><strong>P√∫blico:</strong> ${audience}</p>
                        <p style="margin: 5px 0 0 0;"><strong>Problema:</strong> ${problem}</p>
                        <p style="margin: 5px 0 0 0;"><strong>Nivel:</strong> ${budgetLevel}</p>
                    </div>
                    <h6 style="color: #667eea; margin: 15px 0 10px 0;">üéØ Actividades Recomendadas:</h6>
                    ${activities.map(activity => `<div style="background: #e6fffa; padding: 10px; border-radius: 6px; margin: 8px 0; border-left: 4px solid #4facfe;">‚Ä¢ ${activity}</div>`).join('')}
                    <div style="background: #fff7ed; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <strong>üìà M√©tricas de √âxito:</strong><br>
                        ‚Ä¢ Participaci√≥n: >80% del p√∫blico objetivo<br>
                        ‚Ä¢ Retenci√≥n: >70% en evaluaciones post-programa<br>
                        ‚Ä¢ Cambio de comportamiento: >50% reporta modificaciones
                    </div>
                </div>
            `;

            showToolResult('educationResult', result);
        }

        function calculateEnforcementEffectiveness() {
            const violation = document.getElementById('violationType').value;
            const frequency = parseInt(document.getElementById('controlFrequency').value);
            const fine = parseInt(document.getElementById('fineAmount').value);

            if (!violation || !frequency || !fine) {
                showToolResult('enforcementResult', 'Por favor, completa todos los campos.');
                return;
            }

            const deterrence = {
                velocidad: { base: 0.15, multiplier: 1.2 },
                alcohol: { base: 0.25, multiplier: 1.5 },
                documentos: { base: 0.10, multiplier: 1.1 },
                semaforo: { base: 0.20, multiplier: 1.3 },
                adelantamiento: { base: 0.18, multiplier: 1.4 }
            };

            const data = deterrence[violation];
            const detectionRate = Math.min(frequency * data.base, 0.8); // M√°ximo 80% de detecci√≥n
            const deterrenceEffect = Math.min(fine * data.multiplier / 1000, 0.9); // Efecto disuasivo
            const overallEffectiveness = (detectionRate + deterrenceEffect) / 2 * 100;

            let effectivenessLevel = overallEffectiveness > 70 ? 'Alta' : overallEffectiveness > 40 ? 'Media' : 'Baja';
            let color = overallEffectiveness > 70 ? '#48bb78' : overallEffectiveness > 40 ? '#ed8936' : '#e53e3e';

            const result = `
                <div style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px; color: #2d3748;">
                    <h6 style="color: ${color}; margin-bottom: 15px;">üìà Efectividad: ${effectivenessLevel}</h6>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 3rem; font-weight: bold; color: ${color};">${overallEffectiveness.toFixed(1)}%</div>
                        <p style="margin: 0; color: #4a5568;">Efectividad General del Enforcement</p>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                        <div style="background: #f7fafc; padding: 15px; border-radius: 8px; text-align: center;">
                            <strong>Tasa de Detecci√≥n</strong><br>
                            <span style="color: #4facfe; font-size: 1.5rem;">${(detectionRate * 100).toFixed(1)}%</span>
                        </div>
                        <div style="background: #f7fafc; padding: 15px; border-radius: 8px; text-align: center;">
                            <strong>Efecto Disuasivo</strong><br>
                            <span style="color: #667eea; font-size: 1.5rem;">${(deterrenceEffect * 100).toFixed(1)}%</span>
                        </div>
                    </div>
                    <div style="background: #e6fffa; padding: 15px; border-radius: 8px; border-left: 4px solid #4facfe;">
                        <strong>üí° Recomendaciones:</strong><br>
                        ${overallEffectiveness > 70 ? 
                            '‚Ä¢ Mantener la frecuencia actual de controles<br>‚Ä¢ Considerar expandir a otras infracciones<br>‚Ä¢ Documentar mejores pr√°cticas' :
                            overallEffectiveness > 40 ?
                            '‚Ä¢ Aumentar frecuencia de controles<br>‚Ä¢ Evaluar ajuste en monto de sanciones<br>‚Ä¢ Mejorar visibilidad de las medidas' :
                            '‚Ä¢ Revisar estrategia integral<br>‚Ä¢ Combinar con educaci√≥n<br>‚Ä¢ Evaluar controles de ingenier√≠a'
                        }
                    </div>
                </div>
            `;

            showToolResult('enforcementResult', result);
        }

        function generateIntegratedStrategy() {
            const problem = document.getElementById('safetyProblem').value;
            const location = document.getElementById('problemLocation').value;
            const budget = parseInt(document.getElementById('totalBudget').value);
            const priority = document.getElementById('implementationPriority').value;

            if (!problem || !location || !budget || !priority) {
                showToolResult('strategyResult', 'Por favor, completa todos los campos.');
                return;
            }

            // Distribuci√≥n de presupuesto seg√∫n prioridad
            const budgetDistribution = {
                inmediata: { engineering: 0.6, education: 0.2, enforcement: 0.2 },
                corto: { engineering: 0.5, education: 0.3, enforcement: 0.2 },
                mediano: { engineering: 0.4, education: 0.4, enforcement: 0.2 },
                largo: { engineering: 0.3, education: 0.5, enforcement: 0.2 }
            };

            const distribution = budgetDistribution[priority];
            const engineeringBudget = budget * distribution.engineering;
            const educationBudget = budget * distribution.education;
            const enforcementBudget = budget * distribution.enforcement;

            const result = `
                <div style="background: rgba(255,255,255,0.9); padding: 25px; border-radius: 12px; color: #2d3748;">
                    <h6 style="color: #667eea; margin-bottom: 20px; font-size: 1.2rem;">üöÄ Estrategia Integral de las 3 E's</h6>
                    
                    <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h6 style="margin: 0 0 10px 0;">üìç Informaci√≥n del Proyecto</h6>
                        <p style="margin: 0;"><strong>Problema:</strong> ${problem}</p>
                        <p style="margin: 5px 0 0 0;"><strong>Ubicaci√≥n:</strong> ${location}</p>
                        <p style="margin: 5px 0 0 0;"><strong>Presupuesto Total:</strong> $${budget.toLocaleString()} USD</p>
                        <p style="margin: 5px 0 0 0;"><strong>Prioridad:</strong> ${priority}</p>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">üèóÔ∏è INGENIER√çA</h6>
                            <div style="font-size: 1.5rem; font-weight: bold;">$${engineeringBudget.toLocaleString()}</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">${(distribution.engineering * 100)}% del presupuesto</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #48bb78, #38a169); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">üìö EDUCACI√ìN</h6>
                            <div style="font-size: 1.5rem; font-weight: bold;">$${educationBudget.toLocaleString()}</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">${(distribution.education * 100)}% del presupuesto</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #e53e3e, #c53030); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">‚öñÔ∏è ENFORCEMENT</h6>
                            <div style="font-size: 1.5rem; font-weight: bold;">$${enforcementBudget.toLocaleString()}</div>
                            <div style="font-size: 0.9rem; opacity: 0.9;">${(distribution.enforcement * 100)}% del presupuesto</div>
                        </div>
                    </div>

                    <div style="background: #e6fffa; padding: 20px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #4facfe;">
                        <h6 style="color: #2d3748; margin: 0 0 15px 0;">üìã Plan de Implementaci√≥n Integrado</h6>
                        <div style="display: grid; gap: 12px;">
                            <div style="background: rgba(102,126,234,0.1); padding: 12px; border-radius: 8px;">
                                <strong>Fase 1 - Ingenier√≠a (0-6 meses):</strong> Implementar controles f√≠sicos de mayor impacto
                            </div>
                            <div style="background: rgba(72,187,120,0.1); padding: 12px; border-radius: 8px;">
                                <strong>Fase 2 - Educaci√≥n (3-12 meses):</strong> Lanzar programas de concientizaci√≥n y capacitaci√≥n
                            </div>
                            <div style="background: rgba(229,62,62,0.1); padding: 12px; border-radius: 8px;">
                                <strong>Fase 3 - Enforcement (6-18 meses):</strong> Activar controles y fiscalizaci√≥n sistem√°tica
                            </div>
                        </div>
                    </div>

                    <div style="background: #fff7ed; padding: 20px; border-radius: 12px; border-left: 4px solid #ed8936;">
                        <h6 style="color: #2d3748; margin: 0 0 10px 0;">üìä Indicadores de √âxito Esperados</h6>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div>
                                <strong>Reducci√≥n de accidentes:</strong> 40-60%<br>
                                <strong>Mejora en cumplimiento:</strong> 50-70%
                            </div>
                            <div>
                                <strong>ROI estimado:</strong> 200-400%<br>
                                <strong>Tiempo de recuperaci√≥n:</strong> 3-5 a√±os
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showToolResult('strategyResult', result);
        }

        function runAIAnalysis() {
            const analysisType = document.getElementById('aiAnalysisType').value;
            const studyArea = parseInt(document.getElementById('studyArea').value);
            const budget = parseInt(document.getElementById('aiBudget').value);

            // Verificar datos seleccionados
            const selectedData = [];
            if (document.getElementById('accidentData').checked) selectedData.push('Historial de accidentes');
            if (document.getElementById('trafficData').checked) selectedData.push('Datos de tr√°fico');
            if (document.getElementById('weatherData').checked) selectedData.push('Informaci√≥n meteorol√≥gica');
            if (document.getElementById('infraData').checked) selectedData.push('Estado de infraestructura');
            if (document.getElementById('behaviorData').checked) selectedData.push('Patrones de comportamiento');
            if (document.getElementById('economicData').checked) selectedData.push('Datos socioecon√≥micos');

            if (!analysisType || !studyArea || !budget || selectedData.length === 0) {
                showToolResult('aiResult', 'Por favor, completa todos los campos y selecciona al menos una fuente de datos.');
                return;
            }

            // Calcular m√©tricas basadas en los datos seleccionados
            const dataQuality = selectedData.length / 6; // Calidad basada en cantidad de datos
            const complexityFactor = studyArea > 100 ? 1.5 : studyArea > 50 ? 1.2 : 1.0;
            
            const analysisResults = {
                predictive: {
                    name: 'An√°lisis Predictivo de Riesgos',
                    accuracy: Math.min(85 + (dataQuality * 10), 98),
                    processingTime: Math.max(2, studyArea / 10),
                    recommendations: [
                        'Identificaci√≥n de 15 puntos de alto riesgo con 94% de precisi√≥n',
                        'Predicci√≥n de patrones estacionales de accidentalidad',
                        'Modelo de riesgo por condiciones clim√°ticas adversas',
                        'An√°lisis de correlaci√≥n entre infraestructura y siniestralidad'
                    ]
                },
                optimization: {
                    name: 'Optimizaci√≥n de Controles',
                    accuracy: Math.min(80 + (dataQuality * 12), 95),
                    processingTime: Math.max(5, studyArea / 8),
                    recommendations: [
                        'Optimizaci√≥n de ubicaci√≥n de 8 sem√°foros inteligentes',
                        'Priorizaci√≥n de 12 intervenciones por ROI esperado',
                        'Distribuci√≥n √≥ptima de presupuesto entre las 3 E\'s',
                        'Cronograma de implementaci√≥n por fases'
                    ]
                },
                realtime: {
                    name: 'Monitoreo en Tiempo Real',
                    accuracy: Math.min(90 + (dataQuality * 8), 99),
                    processingTime: 0.5,
                    recommendations: [
                        'Sistema de 25 sensores IoT para monitoreo continuo',
                        'Alertas autom√°ticas por condiciones de riesgo elevado',
                        'Ajuste din√°mico de se√±alizaci√≥n seg√∫n flujo vehicular',
                        'Dashboard ejecutivo con m√©tricas en tiempo real'
                    ]
                },
                comprehensive: {
                    name: 'An√°lisis Integral Multivariable',
                    accuracy: Math.min(88 + (dataQuality * 9), 96),
                    processingTime: Math.max(8, studyArea / 6),
                    recommendations: [
                        'Modelo integral de 47 variables de riesgo',
                        'Estrategia h√≠brida de las 3 E\'s optimizada por IA',
                        'Predicci√≥n de impacto a 5 a√±os con intervalos de confianza',
                        'Sistema de aprendizaje continuo y mejora autom√°tica'
                    ]
                }
            };

            const result = analysisResults[analysisType];
            const costEfficiency = (result.accuracy / 100) * (budget / 100000) * dataQuality * 100;
            const expectedROI = Math.min(costEfficiency * 3, 450);

            const resultHTML = `
                <div style="background: rgba(255,255,255,0.9); padding: 25px; border-radius: 12px; color: #2d3748;">
                    <h6 style="color: #667eea; margin-bottom: 20px; font-size: 1.2rem;">ü§ñ ${result.name}</h6>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">üéØ Precisi√≥n</h6>
                            <div style="font-size: 2rem; font-weight: bold;">${result.accuracy.toFixed(1)}%</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #48bb78, #38a169); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">‚è±Ô∏è Tiempo</h6>
                            <div style="font-size: 2rem; font-weight: bold;">${result.processingTime}${result.processingTime < 1 ? 's' : 'h'}</div>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #e53e3e, #c53030); color: white; padding: 20px; border-radius: 12px; text-align: center;">
                            <h6 style="margin: 0 0 10px 0;">üí∞ ROI</h6>
                            <div style="font-size: 2rem; font-weight: bold;">${expectedROI.toFixed(0)}%</div>
                        </div>
                    </div>

                    <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h6 style="color: #2d3748; margin: 0 0 15px 0;">üìä Fuentes de Datos Utilizadas</h6>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            ${selectedData.map(data => `<span style="background: #667eea; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.85rem;">${data}</span>`).join('')}
                        </div>
                    </div>

                    <div style="background: #e6fffa; padding: 20px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #4facfe;">
                        <h6 style="color: #2d3748; margin: 0 0 15px 0;">üéØ Recomendaciones Generadas por IA</h6>
                        ${result.recommendations.map(rec => `<div style="background: rgba(102,126,234,0.1); padding: 12px; border-radius: 8px; margin: 8px 0;">‚Ä¢ ${rec}</div>`).join('')}
                    </div>

                    <div style="background: #fff7ed; padding: 20px; border-radius: 12px; border-left: 4px solid #ed8936;">
                        <h6 style="color: #2d3748; margin: 0 0 10px 0;">üìà M√©tricas de Impacto Esperado</h6>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                            <div>
                                <strong>Reducci√≥n de accidentes:</strong> ${(result.accuracy * 0.6).toFixed(0)}%<br>
                                <strong>Eficiencia operativa:</strong> ${(costEfficiency).toFixed(0)}%
                            </div>
                            <div>
                                <strong>Ahorro anual estimado:</strong> $${(budget * expectedROI / 100 / 3).toLocaleString()}<br>
                                <strong>Tiempo de recuperaci√≥n:</strong> ${(300 / expectedROI * 12).toFixed(1)} meses
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showToolResult('aiResult', resultHTML);
        }

        function showToolResult(elementId, content) {
            const element = document.getElementById(elementId);
            element.innerHTML = content;
            element.style.display = 'block';
            element.scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateNavigation(1);
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99596a84c2dbb6f2',t:'MTc2MTY0Mzg0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
